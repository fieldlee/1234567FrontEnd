<div id="content" class="app-content" role="main">
  <div class="app-content-body ">
    <div class="bg-light lter b-b wrapper-md">
      <h1 class="m-n font-thin h3">琴行信息配置</h1>
    </div>
    <div class="wrapper-md" >
      <div class="panel panel-default">
        <div class="panel-heading font-bold">
          琴行信息表
        </div>
        <div class="panel-body">
          <form class="form-horizontal" method="get" #f="ngForm" (ngSubmit)="submit()">
            <div class="form-group">
              <label class="col-sm-2 control-label">琴行名称</label>
              <div class="col-sm-10">
                <input type="text" name="delegatename" [(ngModel)]="delegate.name" id="delegateName" class="form-control">
              </div>
            </div>
            <div class="line line-dashed b-b line-lg pull-in"></div>
            <div class="form-group">
              <label class="col-sm-2 control-label">邮箱</label>
              <div class="col-sm-4">
                <input type="text" name="delegateEmail" [(ngModel)]="delegate.email" id="delegateEmail" class="form-control">
              </div>
              <label class="col-sm-2 control-label">电话</label>
              <div class="col-sm-4">
                <input type="text" name="delegateTel" [(ngModel)]="delegate.telephone" id="delegateTel" class="form-control">
              </div>
            </div>
            <div class="line line-dashed b-b line-lg pull-in"></div>
            <div class="form-group">
              <label class="col-sm-2 control-label">省市区</label>
              <div class="col-sm-3">
                <select name="province" class="form-control m-b" [(ngModel)]="delegate.province" (change)="provinceListener()">
                <option></option>
                <option *ngFor="let pro of provinces">{{pro}}</option>
                </select>
              </div>
              <div class="col-sm-3">
                <select name="city" class="form-control m-b" [(ngModel)]="delegate.city" (change)="cityListener()">
                <option></option>
                <option *ngFor="let cityName of citys">{{cityName}}</option>
                </select>
              </div>
              <div class="col-sm-3">
                <select name="district" class="form-control m-b" [(ngModel)]="delegate.district" >
                <option></option>
                <option *ngFor="let district of districts">{{district}}</option>
                </select>
              </div>
            </div>

            <div class="line line-dashed b-b line-lg pull-in"></div>
            <div class="form-group">
              <label class="col-sm-2 control-label">琴行具体地址</label>
              <div class="col-sm-10">
                <input type="text" name="delegateaddress" [(ngModel)]="delegate.address" id="delegateAddress" class="form-control">
              </div>
            </div>
            <!--图片信息-->

            <div class="line line-dashed b-b line-lg pull-in"></div>
            <div class="form-group">
              <label class="col-sm-2 control-label">琴行图标上传</label>
              <div class="col-sm-10">
                <form id="uploadForm" enctype="multipart/form-data" action="/api/web/file" method="post">
                  <input ui-jq="filestyle" accept="image/*" [(ngModel)]="uploadFileName" name="userPhoto" type="file" data-icon="false" (change)="changeListener($event)"
                    data-classButton="btn btn-default" data-classInput="form-control inline v-middle input-s">
                </form>
              </div>
            </div>
            <!--图片信息-->
            <div class="col-sm-10 col-sm-offset-2 table-responsive">
              <table id="delegateImagesListTable" ui-jq="dataTable" class="table table-striped b-t b-b">
                <thead>
                  <tr>
                    <th style="width:80%">琴行图片</th>
                    <th style="width:20%">删除</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let ima of delegate.images">
                    <td>{{ima}}</td>
                    <td><button class="delete" (click)="deleteImage(ima);">x</button></td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <div class="line line-dashed b-b line-lg pull-in"></div>
            <div class="form-group">
              <div class="col-sm-4 col-sm-offset-2">
                <button type="button" (click)="cancle()" class="btn btn-default">取消</button>
                <button type="submit" class="btn btn-primary">保存</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="bg-light lter b-b wrapper-md">
      <h1 class="m-n font-thin h3">已配置的琴行信息列表</h1>
    </div>
    <div class="wrapper-md">
      <div class="panel panel-default">
        <div class="panel-heading">
          琴行信息列表
        </div>
        <div class="table-responsive" >
          <table id="adsListTable" ui-jq="dataTable" class="table table-striped b-t b-b">
            <thead>
              <tr>
                <th style="width:25%">琴行名称</th>
                <th style="width:25%">省</th>
                <th style="width:20%">市</th>
                <th style="width:15%">区</th>
                
                <th style="width:15%">修改</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let del of delegates">
                <td>{{del.name}}</td>
                <td>{{del.province}}</td>
                <td>{{del.city}}</td>
                <td>{{del.district}}</td>
            
                <td>
                  
                  <!--<button class="delete" (click)="update(pro); $event.stopPropagation()">x</button>-->
                  <button class="col-sm-1 btn m-b-xs w-xs btn-info " style="width:50px" (click)="update(del); $event.stopPropagation()">U</button>                  &nbsp;&nbsp;
                  <button class="col-sm-1 col-sm-offset-1 btn m-b-xs w-xs btn-danger"  style="width:50px" (click)="delete(del); $event.stopPropagation()">X</button>
             
                  
                  </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>